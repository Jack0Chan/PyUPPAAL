<?xml version='1.0' encoding='utf-8'?>
<nta>
	<declaration>// Place global declarations here.
clock tTL;
broadcast chan pCheckLight, pGreen, pRed, pYellow, cCheckLight, cGreen, cRed, cCrss;
broadcast chan cYellow, pCrss, pFinish;</declaration>
	<template>
		<name>TrafficLight</name>
		<declaration>clock tTL;</declaration>
		<location id="id0" x="358" y="0">
			<name x="358" y="-42">cRed_pGreen</name>
			<label kind="invariant" x="375" y="-25">tTL&lt;=55</label>
		</location>
		<location id="id1" x="358" y="68">
			<committed />
		</location>
		<location id="id2" x="518" y="0">
			<name x="518" y="-42">cRed_pYellow</name>
			<label kind="invariant" x="535" y="-25">tTL&lt;=5</label>
		</location>
		<location id="id3" x="518" y="68">
			<committed />
		</location>
		<location id="id4" x="51" y="0">
			<name x="51" y="-42">cGreen_pRed</name>
			<label kind="invariant" x="68" y="-25">tTL&lt;=55</label>
		</location>
		<location id="id5" x="51" y="68">
			<committed />
		</location>
		<location id="id6" x="204" y="0">
			<name x="204" y="-42">cYellow_pRed</name>
			<label kind="invariant" x="221" y="-25">tTL&lt;=5</label>
		</location>
		<location id="id7" x="204" y="68">
			<committed />
		</location>
		<location id="id8" x="358" y="-76">
			<committed />
		</location>
		<location id="id9" x="517" y="-76">
			<committed />
		</location>
		<location id="id10" x="51" y="-76">
			<committed />
		</location>
		<location id="id11" x="204" y="-76">
			<committed />
		</location>
		<init ref="id4" />
		<transition>
			<source ref="id6" />
			<target ref="id11" />
			<label kind="synchronisation" x="212" y="-59">pCheckLight?</label>
			<nail x="221" y="-34" />
			<nail x="221" y="-59" />
		</transition>
		<transition>
			<source ref="id4" />
			<target ref="id10" />
			<label kind="synchronisation" x="59" y="-59">pCheckLight?</label>
			<nail x="68" y="-34" />
			<nail x="68" y="-59" />
		</transition>
		<transition>
			<source ref="id2" />
			<target ref="id9" />
			<label kind="synchronisation" x="526" y="-59">pCheckLight?</label>
			<nail x="534" y="-34" />
			<nail x="534" y="-59" />
		</transition>
		<transition>
			<source ref="id0" />
			<target ref="id8" />
			<label kind="synchronisation" x="367" y="-59">pCheckLight?</label>
			<nail x="375" y="-34" />
			<nail x="375" y="-59" />
		</transition>
		<transition>
			<source ref="id11" />
			<target ref="id6" />
			<label kind="synchronisation" x="170" y="-59">pRed!</label>
			<nail x="187" y="-59" />
			<nail x="187" y="-34" />
		</transition>
		<transition>
			<source ref="id10" />
			<target ref="id4" />
			<label kind="synchronisation" x="17" y="-59">pRed!</label>
			<nail x="34" y="-59" />
			<nail x="34" y="-34" />
		</transition>
		<transition>
			<source ref="id9" />
			<target ref="id2" />
			<label kind="synchronisation" x="467" y="-59">pYellow!</label>
			<nail x="500" y="-58" />
			<nail x="500" y="-34" />
		</transition>
		<transition>
			<source ref="id8" />
			<target ref="id0" />
			<label kind="synchronisation" x="307" y="-59">pGreen!</label>
			<nail x="341" y="-59" />
			<nail x="341" y="-34" />
		</transition>
		<transition>
			<source ref="id6" />
			<target ref="id0" />
			<label kind="guard" x="280" y="-17">tTL&gt;=5</label>
			<label kind="assignment" x="280" y="0">tTL=0</label>
		</transition>
		<transition>
			<source ref="id4" />
			<target ref="id6" />
			<label kind="guard" x="127" y="-17">tTL&gt;=55</label>
			<label kind="assignment" x="127" y="0">tTL=0</label>
		</transition>
		<transition>
			<source ref="id2" />
			<target ref="id4" />
			<label kind="guard" x="238" y="-110">tTL&gt;=5</label>
			<label kind="assignment" x="306" y="-110">tTL=0</label>
			<nail x="620" y="0" />
			<nail x="620" y="-93" />
			<nail x="8" y="-93" />
			<nail x="8" y="0" />
		</transition>
		<transition>
			<source ref="id1" />
			<target ref="id0" />
			<label kind="synchronisation" x="316" y="26">cRed!</label>
			<nail x="341" y="42" />
			<nail x="341" y="26" />
		</transition>
		<transition>
			<source ref="id0" />
			<target ref="id1" />
			<label kind="synchronisation" x="367" y="26">cCheckLight?</label>
			<nail x="375" y="26" />
			<nail x="375" y="42" />
		</transition>
		<transition>
			<source ref="id0" />
			<target ref="id2" />
			<label kind="guard" x="435" y="-17">tTL&gt;=55</label>
			<label kind="assignment" x="435" y="0">tTL=0</label>
		</transition>
		<transition>
			<source ref="id3" />
			<target ref="id2" />
			<label kind="synchronisation" x="484" y="25">cRed!</label>
			<nail x="502" y="42" />
			<nail x="502" y="26" />
		</transition>
		<transition>
			<source ref="id2" />
			<target ref="id3" />
			<label kind="synchronisation" x="526" y="26">cCheckLight?</label>
			<nail x="535" y="26" />
			<nail x="535" y="42" />
		</transition>
		<transition>
			<source ref="id5" />
			<target ref="id4" />
			<label kind="synchronisation" x="0" y="25">cGreen!</label>
			<nail x="35" y="42" />
			<nail x="35" y="26" />
		</transition>
		<transition>
			<source ref="id4" />
			<target ref="id5" />
			<label kind="synchronisation" x="59" y="25">cCheckLight?</label>
			<nail x="68" y="26" />
			<nail x="68" y="42" />
		</transition>
		<transition>
			<source ref="id7" />
			<target ref="id6" />
			<label kind="synchronisation" x="153" y="26">cYellow!</label>
			<nail x="188" y="42" />
			<nail x="188" y="26" />
		</transition>
		<transition>
			<source ref="id6" />
			<target ref="id7" />
			<label kind="synchronisation" x="212" y="26">cCheckLight?</label>
			<nail x="221" y="26" />
			<nail x="221" y="42" />
		</transition>
	</template>
	<template>
		<name>Pedestrian</name>
		<parameter> int tPCrssMin, int tPCrssMax</parameter>
		<declaration>clock tp;
clock tTL;</declaration>
		<location id="id12" x="-722" y="-101">
			<name x="-739" y="-127">Idle</name>
			<label kind="invariant" x="-748" y="-93">tTL &lt;= 115</label>
		</location>
		<location id="id13" x="-688" y="-42">
			<name x="-714" y="-68">Crossing</name>
			<label kind="invariant" x="-714" y="-34">tp&lt;=tPCrssMax</label>
		</location>
		<location id="id14" x="-586" y="-101">
			<name x="-569" y="-110">CheckTL</name>
			<committed />
		</location>
		<location id="id15" x="-586" y="-42">
			<committed />
		</location>
		<location id="id16" x="-586" y="-161">
			<committed />
		</location>
		<location id="id17" x="-773" y="-42">
			<name x="-765" y="-68">Finish</name>
		</location>
		<init ref="id12" />
		<transition>
			<source ref="id16" />
			<target ref="id17" />
			<nail x="-773" y="-161" />
		</transition>
		<transition>
			<source ref="id12" />
			<target ref="id14" />
			<label kind="synchronisation" x="-705" y="-118">pCheckLight!</label>
		</transition>
		<transition>
			<source ref="id16" />
			<target ref="id15" />
			<nail x="-501" y="-161" />
			<nail x="-501" y="-42" />
		</transition>
		<transition>
			<source ref="id14" />
			<target ref="id16" />
			<label kind="synchronisation" x="-569" y="-144">pYellow?</label>
			<nail x="-569" y="-135" />
		</transition>
		<transition>
			<source ref="id15" />
			<target ref="id13" />
			<label kind="assignment" x="-646" y="-59">tp=0</label>
		</transition>
		<transition>
			<source ref="id13" />
			<target ref="id17" />
			<label kind="guard" x="-748" y="-42">tp&gt;=tPCrssMin</label>
		</transition>
		<transition>
			<source ref="id14" />
			<target ref="id15" />
			<label kind="synchronisation" x="-586" y="-85">pGreen?</label>
		</transition>
		<transition>
			<source ref="id14" />
			<target ref="id16" />
			<label kind="synchronisation" x="-646" y="-144">pRed?</label>
			<nail x="-603" y="-135" />
		</transition>
	</template>
	<template>
		<name>Car</name>
		<parameter>int tCCrssMax, int tCCrssMin</parameter>
		<declaration>// position of the car
clock tc;</declaration>
		<location id="id18" x="161" y="59">
			<name x="136" y="25">Crossing</name>
			<label kind="invariant" x="144" y="68">tc&lt;=tCCrssMin</label>
		</location>
		<location id="id19" x="-59" y="59">
			<name x="-42" y="59">Idle</name>
		</location>
		<location id="id20" x="68" y="59">
			<name x="68" y="25">CheckTL</name>
			<committed />
		</location>
		<location id="id21" x="-59" y="102">
			<name x="-42" y="102">Finish</name>
		</location>
		<init ref="id19" />
		<transition>
			<source ref="id20" />
			<target ref="id19" />
			<label kind="synchronisation" x="-42" y="17">cRed?</label>
			<label kind="assignment" x="8" y="17">tc=0</label>
			<nail x="51" y="34" />
			<nail x="-42" y="34" />
		</transition>
		<transition>
			<source ref="id18" />
			<target ref="id21" />
			<label kind="guard" x="-25" y="85">tc&gt;=tCCrssMin</label>
			<label kind="assignment" x="93" y="85">tc=0</label>
			<nail x="161" y="102" />
		</transition>
		<transition>
			<source ref="id20" />
			<target ref="id18" />
			<label kind="synchronisation" x="85" y="42">cGreen?</label>
			<label kind="assignment" x="93" y="59">tc=0</label>
		</transition>
		<transition>
			<source ref="id20" />
			<target ref="id19" />
			<label kind="synchronisation" x="-51" y="-8">cYellow?</label>
			<label kind="assignment" x="17" y="-8">tc=0</label>
			<nail x="68" y="10" />
			<nail x="-59" y="10" />
		</transition>
		<transition>
			<source ref="id19" />
			<target ref="id20" />
			<label kind="guard" x="-8" y="59">tc&gt;=1</label>
			<label kind="synchronisation" x="-42" y="42">cCheckLight!</label>
		</transition>
	</template>
	<template><name>Monitor1</name><location id="id22" x="0" y="200" /><location id="id23" x="300" y="200" /><location id="id24" x="600" y="200"><name x="600" y="180">pass</name></location><location id="id25" x="0" y="-200"><name x="0" y="-220">fail0</name></location><location id="id26" x="300" y="-200"><name x="300" y="-220">fail1</name></location><init ref="id22" /><transition><source ref="id22" /><target ref="id23" /><label kind="synchronisation" x="100" y="170">pRed?</label></transition><transition><source ref="id23" /><target ref="id24" /><label kind="synchronisation" x="400" y="170">cGreen?</label></transition><transition><source ref="id22" /><target ref="id25" /><label kind="synchronisation" x="-100" y="-130">pCheckTraffic?</label><nail x="-100" y="-100" /></transition><transition><source ref="id22" /><target ref="id25" /><label kind="synchronisation" x="-80" y="-130">pGreen?</label><nail x="-80" y="-100" /></transition><transition><source ref="id22" /><target ref="id25" /><label kind="synchronisation" x="-40" y="-130">pYellow?</label><nail x="-40" y="-100" /></transition><transition><source ref="id22" /><target ref="id25" /><label kind="synchronisation" x="-20" y="-130">cCrss?</label><nail x="-20" y="-100" /></transition><transition><source ref="id22" /><target ref="id25" /><label kind="synchronisation" x="0" y="-130">cCheckTraffic?</label><nail x="0" y="-100" /></transition><transition><source ref="id22" /><target ref="id25" /><label kind="synchronisation" x="20" y="-130">cGreen?</label><nail x="20" y="-100" /></transition><transition><source ref="id22" /><target ref="id25" /><label kind="synchronisation" x="40" y="-130">cRed?</label><nail x="40" y="-100" /></transition><transition><source ref="id22" /><target ref="id25" /><label kind="synchronisation" x="60" y="-130">cYellow?</label><nail x="60" y="-100" /></transition><transition><source ref="id22" /><target ref="id25" /><label kind="synchronisation" x="80" y="-130">cCrss?</label><nail x="80" y="-100" /></transition><transition><source ref="id23" /><target ref="id26" /><label kind="synchronisation" x="200" y="-130">pCheckTraffic?</label><nail x="200" y="-100" /></transition><transition><source ref="id23" /><target ref="id26" /><label kind="synchronisation" x="220" y="-130">pGreen?</label><nail x="220" y="-100" /></transition><transition><source ref="id23" /><target ref="id26" /><label kind="synchronisation" x="240" y="-130">pRed?</label><nail x="240" y="-100" /></transition><transition><source ref="id23" /><target ref="id26" /><label kind="synchronisation" x="260" y="-130">pYellow?</label><nail x="260" y="-100" /></transition><transition><source ref="id23" /><target ref="id26" /><label kind="synchronisation" x="280" y="-130">cCrss?</label><nail x="280" y="-100" /></transition><transition><source ref="id23" /><target ref="id26" /><label kind="synchronisation" x="300" y="-130">cCheckTraffic?</label><nail x="300" y="-100" /></transition><transition><source ref="id23" /><target ref="id26" /><label kind="synchronisation" x="340" y="-130">cRed?</label><nail x="340" y="-100" /></transition><transition><source ref="id23" /><target ref="id26" /><label kind="synchronisation" x="360" y="-130">cYellow?</label><nail x="360" y="-100" /></transition><transition><source ref="id23" /><target ref="id26" /><label kind="synchronisation" x="380" y="-130">cCrss?</label><nail x="380" y="-100" /></transition></template><system>// ========== systems ==========
PCar  = Car(4, 1);
PTrafficLights = TrafficLight();
PPedestrian = Pedestrian(0, 10);

system PCar, PTrafficLights, PPedestrian,Monitor1;</system>
	<queries><query><formula>E&lt;&gt; ! not (PPedestrian.Crossing and PCar.Crossing) &amp;&amp; !Monitor1.pass</formula><comment /></query></queries></nta>